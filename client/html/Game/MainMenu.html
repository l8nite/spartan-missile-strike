<html>
</html>
<head>
	<script src="../Game/GameMaster.js"></script>
	<script src="../View/View.js"></script>
	<script src="../Game/MainMenu.js"></script>
	<script src="../jquery/jquery.js"></script>
	<script src="../Util/DomHelper.js"></script>
	<script src="../Util/Fridge.js"></script>
	<script src="../View/MainView.js"></script>
	<script>
	window.onload = function () {
		var Imports = {
			DomHelper: new DomHelper(),
			domId: {
				"MainMenu": "main-menu"
			}
		};
		Imports.GameMaster = new GameMaster("user:0001", "12345", Imports);
		Imports.ViewManager = new MainView(Imports);

		var c = 0;
		Imports.GameMaster._getGamesFromService = function (fromWhen) {
			var d = new $.Deferred();
			var games = [{
				id: "game:0",
				status: "active",
				creator: "user:0001",
				opponent: "user:0002",
				current: "user:0001"
			}, {
				id: "game:1",
				status: "active",
				creator: "user:0003",
				opponent: "user:0001",
				current: "user:0003"
			}, {
				id: "game:2",
				status: "completed",
				creator: "user:0001",
				opponent: "user:0004",
				current: "user:0001"
			}];
			if (++c === 3) {
				games.push({
					id: "game:3",
					status: "active",
					creator: "user:0005",
					opponent: "user:0001",
					current: "user:0001"
				});
				games[1].current = "user:0001";
			}
			setTimeout(function () {
				d.resolve(games);
			}, 1000)
			return d;
		};

		Imports.GameMaster._getNameFromService = function (userid) {
			var d = new $.Deferred();
			var name;
			if (userid === "user:0001") {
				name = {
					username: "Chris.Cook",
					realname: "Chris Cook"
				};
			} else if (userid === "user:0002") {
				name = {
					username: "Shaun.Guth",
					realname: "Shaun Guth"
				};
			} else if (userid === "user:0003") {
				name = {
					username: "Saiteja.Karra"
				};
			} else if (userid === "user:0004") {
				name = {
					username: "Jomana.Sherif"
				};
			}

			if (name) {
				setTimeout(function () {
					d.resolve(name);
				}, 500);
			} else {
				setTimeout(function () {
					d.reject();
				}, 500);
			}
			return d;
		};

		new MainMenu(Imports).show();
	};
	</script>
</head>
<body>
	<div id="main-menu">
		<div id="list-yourturn"><h1>Your Turn</h1></div>
		<div id="list-histurn"><h1>Not Your Turn</h1></div>
		<div id="list-complete"><h1>Nobody's Turn</h1></div>
		<div style="display: none;">
			<div id="game-prototype">
				<span class="opponent"></span>
			</div>
		</div>
	</div>
</body>
</html>